<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gulf Hoops Rankings</title>
  <link rel="stylesheet" href="css/rankings.css">
</head>
<body>

<header>
  <div class="header-container">
    <h1>Gulf Hoops Rankings</h1>
    <nav class="sub-nav">
      <a href="#">Home</a>
      <a href="#">Rankings</a>
      <a href="#">Ranking System</a>
      <a href="#">Contact</a>
    </nav>
  </div>
</header>

<main class="rankings-page">
  <div class="container">

    <h2 class="page-title">2026 Top Basketball Recruits</h2>

    <div class="content-wrapper">

      <!-- SIDEBAR FILTERS -->
      <aside class="sidebar">
        <h3>Filters</h3>
        <select id="filter-country">
          <option value="All">All Countries</option>
          <option value="Bahrain">Bahrain</option>
          <option value="Qatar">Qatar</option>
          <option value="UAE">UAE</option>
          <option value="Saudi Arabia">Saudi Arabia</option>
          <option value="Kuwait">Kuwait</option>
          <option value="Oman">Oman</option>
        </select>

        <select id="filter-category">
          <option value="All">All Categories</option>
          <option value="U16">U16</option>
          <option value="U18">U18</option>
          <option value="U22">U22</option>
          <option value="Main">Main Team</option>
        </select>
      </aside>

      <!-- MAIN TABLE + SEARCH -->
      <div class="main-table">
        <div class="table-header">
          <input type="text" id="search-player" placeholder="Search player name...">
        </div>

        <div class="rankings-grid" id="rankings-grid">
          <table>
            <thead>
              <tr>
                <th>Rank</th>
                <th>Player</th>
                <th>Pos</th>
                <th>Rating</th>
                <th>Status</th>
                <th>Team</th>
                <th>Claim Profile</th>
              </tr>
            </thead>
            <tbody id="player-rows">
              <!-- JS will populate player rows -->
            </tbody>
          </table>
        </div>
      </div>

    </div>

  </div>
</main>

<script>
fetch('data/players.json')
  .then(res => res.json())
  .then(players => {

    const tbody = document.getElementById('player-rows');
    const filterCountry = document.getElementById('filter-country');
    const filterCategory = document.getElementById('filter-category');
    const searchInput = document.getElementById('search-player');

    function renderList() {
      const searchText = searchInput.value.toLowerCase();

      tbody.innerHTML = '';
      let list = players
        .filter(p => filterCountry.value === 'All' || p.country === filterCountry.value)
        .filter(p => filterCategory.value === 'All' || p.category === filterCategory.value)
        .filter(p => p.name.toLowerCase().includes(searchText));

      list.sort((a,b) => a.rankOverall - b.rankOverall);

      list.forEach(player => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${player.rankOverall}</td>
          <td class="player-name">
            <img class="player-avatar" src="${player.photo}" alt="${player.name}">
            <span>${player.name}</span>
          </td>
          <td>${player.position || "-"}</td>
          <td>${player.rating || "-"}</td>
          <td>${player.status || "-"}</td>
          <td>${player.team || "-"}</td>
          <td><span class="claim-profile">Claim Profile</span></td>
        `;
        tbody.appendChild(row);
      });
    }

    filterCountry.onchange = renderList;
    filterCategory.onchange = renderList;
    searchInput.onkeyup = renderList;
    renderList();

  })
  .catch(err => console.error('Error loading players:', err));
</script>

</body>
</html>
